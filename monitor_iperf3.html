<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coopelesca - Monitor de Red iperf3</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #00a8cc 0%, #0891b2 50%, #0e7490 100%);
    min-height: 100vh;
    padding: 20px;
}
.container {
    max-width: 1400px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.98);
    border-radius: 20px;
    padding: 30px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.15);
}
.header {
    text-align: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 4px solid #00a8cc;
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border-radius: 15px;
    padding: 30px;
}
.coopelesca-logo {
    color: #00a8cc;
    font-size: 3em;
    font-weight: bold;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,168,204,0.3);
}
.header h1 {
    color: #0e7490;
    font-size: 2em;
    margin-bottom: 5px;
}
.header h2 {
    color: #0891b2;
    font-size: 1.5em;
    margin-bottom: 10px;
    font-weight: normal;
}
.header p {
    color: #0e7490;
    font-size: 1.1em;
}
.version-badge {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9em;
    font-weight: bold;
    display: inline-block;
    margin-top: 10px;
}
.company-info {
    background: linear-gradient(135deg, #00a8cc 0%, #0891b2 100%);
    color: white;
    padding: 25px;
    border-radius: 15px;
    margin-bottom: 30px;
    text-align: center;
}
.company-info h3 {
    font-size: 1.3em;
    margin-bottom: 15px;
}
.company-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 15px;
}
.company-item {
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 10px;
    backdrop-filter: blur(10px);
}
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}
.stat-card {
    background: white;
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    text-align: center;
    border-left: 5px solid #00a8cc;
    transition: transform 0.3s ease;
}
.stat-card:hover {
    transform: translateY(-5px);
}
.stat-value {
    font-size: 2em;
    font-weight: bold;
    color: #0891b2;
    margin-bottom: 5px;
}
.stat-label {
    color: #0e7490;
    font-size: 0.9em;
    font-weight: 600;
}
.charts-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 30px;
    margin-bottom: 30px;
}
.chart-card {
    background: white;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    border-top: 4px solid #00a8cc;
}
.chart-title {
    font-size: 1.3em;
    color: #0e7490;
    margin-bottom: 20px;
    text-align: center;
    font-weight: bold;
}
canvas {
    max-height: 400px !important;
}
.data-table {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    margin-top: 30px;
}
.table-header {
    background: linear-gradient(135deg, #00a8cc 0%, #0891b2 100%);
    color: white;
    padding: 20px;
    font-size: 1.2em;
    font-weight: bold;
    text-align: center;
}
.table-content {
    max-height: 500px;
    overflow-y: auto;
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    padding: 12px;
    text-align: center;
    border-bottom: 1px solid #e0f2fe;
}
th {
    background: #f0f9ff;
    font-weight: bold;
    position: sticky;
    top: 0;
    z-index: 10;
    color: #0e7490;
}
tr:hover {
    background: #f0f9ff;
}
.status {
    padding: 20px;
    margin-bottom: 20px;
    border-radius: 15px;
    text-align: center;
    font-weight: bold;
    font-size: 1.1em;
}
.status.completed {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: #1e3a8a;
    border: 2px solid #3b82f6;
}
.footer {
    margin-top: 40px;
    text-align: center;
    padding: 20px;
    background: #f0f9ff;
    border-radius: 15px;
    color: #0e7490;
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<div class="coopelesca-logo">COOPELESCA</div>
<h1>ðŸ“¶ Monitor de Red</h1>
<h2>Mediciones de Velocidad con iperf3</h2>
<p>Monitoreo de throughput y latencia en tiempo real</p>
<span class="version-badge">Version 3.2</span>
</div>

<div class="company-info">
<h3>InformaciÃ³n del Monitoreo</h3>
<div class="company-details">
<div class="company-item"><strong>Servidor iperf3:</strong><br>192.168.110.6:5201</div>
<div class="company-item"><strong>Host Ping:</strong><br>190.211.105.131</div>
<div class="company-item"><strong>Inicio:</strong><br>2025-11-05T07:47:10-0600</div>
<div class="company-item"><strong>FinalizaciÃ³n:</strong><br>2025-11-05T09:34:29-0600</div>
<div class="company-item"><strong>DuraciÃ³n Test:</strong><br>1 hora 45 minutos</div>
<div class="company-item"><strong>Intervalo:</strong><br>15 segundos</div>
</div>
</div>

<div id="status" class="status completed">âœ… Monitoreo terminado</div>

<div class="stats-grid">
<div class="stat-card">
<div class="stat-value" id="total-readings">39</div>
<div class="stat-label">Mediciones Totales</div>
</div>
<div class="stat-card">
<div class="stat-value" id="avg-dl">322.36 Mbps</div>
<div class="stat-label">Descarga Promedio</div>
</div>
<div class="stat-card">
<div class="stat-value" id="avg-ul">293.90 Mbps</div>
<div class="stat-label">Subida Promedio</div>
</div>
<div class="stat-card">
<div class="stat-value" id="avg-ping">1.50 ms</div>
<div class="stat-label">Ping Promedio</div>
</div>
<div class="stat-card">
<div class="stat-value" id="avg-loss">0.06%</div>
<div class="stat-label">PÃ©rdida Promedio</div>
</div>
</div>

<div class="charts-container">
<div class="chart-card">
<div class="chart-title">ðŸ“¥ Velocidad de Descarga</div>
<canvas id="dlChart"></canvas>
</div>
<div class="chart-card">
<div class="chart-title">ðŸ“¤ Velocidad de Subida</div>
<canvas id="ulChart"></canvas>
</div>
<div class="chart-card">
<div class="chart-title">ðŸ“¡ Latencia (Ping) - 190.211.105.131</div>
<canvas id="pingChart"></canvas>
</div>
<div class="chart-card">
<div class="chart-title">ðŸ“‰ PÃ©rdida de Paquetes</div>
<canvas id="lossChart"></canvas>
</div>
</div>

<div class="data-table">
<div class="table-header">ðŸ“‹ Registro de Mediciones</div>
<div class="table-content">
<table>
<thead>
<tr>
<th>Timestamp</th>
<th>Descarga (Mbps)</th>
<th>Subida (Mbps)</th>
<th>Ping (ms)</th>
<th>PÃ©rdida (%)</th>
</tr>
</thead>
<tbody id="dataTable"></tbody>
</table>
</div>
</div>

<div class="footer">
<p><strong>Coopelesca R.L.</strong></p>
<p>Sistema de Monitoreo de Red con iperf3 â€¢ 2025</p>
<p>Todos los derechos reservados</p>
</div>
</div>

<script>
const coopelescaColors = {
    primary: '#00a8cc',
    secondary: '#0891b2',
    tertiary: '#0e7490',
    light: '#67e8f9'
};

const baseChartConfig = {
    type: 'line',
    options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: {
            intersect: false,
            mode: 'index'
        },
        scales: {
            y: {
                beginAtZero: true,
                grid: {
                    color: 'rgba(14, 116, 144, 0.1)'
                },
                ticks: {
                    font: { size: 12 },
                    color: coopelescaColors.tertiary
                }
            },
            x: {
                grid: {
                    color: 'rgba(14, 116, 144, 0.1)'
                },
                ticks: {
                    font: { size: 11 },
                    maxRotation: 45,
                    color: coopelescaColors.tertiary
                }
            }
        },
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(14, 116, 144, 0.9)',
                titleColor: 'white',
                bodyColor: 'white',
                borderColor: coopelescaColors.light,
                borderWidth: 2
            }
        },
        elements: {
            line: {
                tension: 0.4,
                borderWidth: 3
            },
            point: {
                radius: 4,
                hoverRadius: 7,
                borderWidth: 2,
                backgroundColor: 'white'
            }
        }
    }
};

const dlChart = new Chart(document.getElementById('dlChart'), {
    ...baseChartConfig,
    data: {
        labels: [],
        datasets: [{
            data: [],
            borderColor: coopelescaColors.primary,
            backgroundColor: 'rgba(0, 168, 204, 0.1)',
            fill: true,
            pointBackgroundColor: 'white',
            pointBorderColor: coopelescaColors.primary
        }]
    }
});

const ulChart = new Chart(document.getElementById('ulChart'), {
    ...baseChartConfig,
    data: {
        labels: [],
        datasets: [{
            data: [],
            borderColor: coopelescaColors.secondary,
            backgroundColor: 'rgba(8, 145, 178, 0.1)',
            fill: true,
            pointBackgroundColor: 'white',
            pointBorderColor: coopelescaColors.secondary
        }]
    }
});

const pingChart = new Chart(document.getElementById('pingChart'), {
    ...baseChartConfig,
    data: {
        labels: [],
        datasets: [{
            data: [],
            borderColor: coopelescaColors.tertiary,
            backgroundColor: 'rgba(14, 116, 144, 0.1)',
            fill: true,
            pointBackgroundColor: 'white',
            pointBorderColor: coopelescaColors.tertiary
        }]
    }
});

const lossChart = new Chart(document.getElementById('lossChart'), {
    ...baseChartConfig,
    data: {
        labels: [],
        datasets: [{
            data: [],
            borderColor: '#e74c3c',
            backgroundColor: 'rgba(231, 76, 60, 0.1)',
            fill: true,
            pointBackgroundColor: 'white',
            pointBorderColor: '#e74c3c'
        }]
    }
});

let dataPoints = [];

function addDataPoint(timestamp, dl, ul, ping, loss) {
    dataPoints.push({ timestamp, dl, ul, ping, loss });
}

function renderCharts() {
    dataPoints.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

    dataPoints.forEach(data => {
        const timeLabel = new Date(data.timestamp).toLocaleTimeString();
        
        dlChart.data.labels.push(timeLabel);
        dlChart.data.datasets[0].data.push(parseFloat(data.dl) || 0);
        
        ulChart.data.labels.push(timeLabel);
        ulChart.data.datasets[0].data.push(parseFloat(data.ul) || 0);
        
        pingChart.data.labels.push(timeLabel);
        pingChart.data.datasets[0].data.push(parseFloat(data.ping) || 0);
        
        lossChart.data.labels.push(timeLabel);
        lossChart.data.datasets[0].data.push(parseFloat(data.loss) || 0);
    });

    dlChart.update();
    ulChart.update();
    pingChart.update();
    lossChart.update();

    const tableBody = document.getElementById('dataTable');
    tableBody.innerHTML = '';
    for (let i = dataPoints.length - 1; i >= 0; i--) {
        const data = dataPoints[i];
        const row = tableBody.insertRow();
        row.innerHTML = '<td>' + new Date(data.timestamp).toLocaleString() + '</td>' +
            '<td>' + parseFloat(data.dl).toFixed(2) + '</td>' +
            '<td>' + parseFloat(data.ul).toFixed(2) + '</td>' +
            '<td>' + parseFloat(data.ping).toFixed(2) + '</td>' +
            '<td>' + parseFloat(data.loss).toFixed(2) + '</td>';
    }
}

addDataPoint('2025-11-05T07:49:40-0600', 301.3479080461476, 272.99994065119984, 1.2421236943121463, 0.0);
addDataPoint('2025-11-05T07:52:25-0600', 345.08046443862423, 319.81519020353244, 1.29564151324389, 0.0);
addDataPoint('2025-11-05T07:55:10-0600', 337.7158591542282, 276.1807375720387, 1.9419027434386065, 0.0);
addDataPoint('2025-11-05T07:57:55-0600', 302.8344855809195, 309.61144358184185, 1.6805143100322537, 0.0);
addDataPoint('2025-11-05T08:00:40-0600', 341.62545038895274, 270.39710186390084, 1.9256697816818027, 0.0);
addDataPoint('2025-11-05T08:03:25-0600', 312.4342680336415, 257.9646907124029, 1.6360975223992202, 0.0);
addDataPoint('2025-11-05T08:06:10-0600', 331.239173509526, 266.881806979328, 1.4921366008646004, 0.0);
addDataPoint('2025-11-05T08:08:55-0600', 331.998013348249, 320.9998421977326, 1.2273927605264778, 0.0);
addDataPoint('2025-11-05T08:11:40-0600', 315.3096224746344, 300.5635181725126, 1.903091012879182, 0.0);
addDataPoint('2025-11-05T08:14:26-0600', 304.898048420804, 325.94161327109646, 1.6251553163640649, 0.0);
addDataPoint('2025-11-05T08:17:11-0600', 324.0549378411241, 322.961760913706, 1.4472099702223187, 1.934594041447348);
addDataPoint('2025-11-05T08:19:56-0600', 330.41272729809657, 328.16889283865083, 1.4174176801162335, 0.0);
addDataPoint('2025-11-05T08:22:41-0600', 307.8667391433602, 290.8225341272318, 1.9436583646000878, 0.0);
addDataPoint('2025-11-05T08:25:26-0600', 342.26818151596353, 278.00282832098014, 1.3015214332048277, 0.0);
addDataPoint('2025-11-05T08:28:11-0600', 303.5354935540548, 277.4593746390633, 1.4914464045141989, 0.0);
addDataPoint('2025-11-05T08:30:56-0600', 310.6900276025518, 294.72790249069425, 1.9109843776684017, 0.0);
addDataPoint('2025-11-05T08:33:41-0600', 312.4656690297043, 287.55468503645636, 1.0552134920509726, 0.0);
addDataPoint('2025-11-05T08:36:26-0600', 345.2134262052629, 326.07113142127554, 1.5206373204557795, 0.0);
addDataPoint('2025-11-05T08:39:11-0600', 321.6059367697643, 323.7991550429256, 1.3089347496114723, 0.0);
addDataPoint('2025-11-05T08:41:56-0600', 331.03940492448737, 286.5209963045998, 1.4904060981544816, 0.0);
addDataPoint('2025-11-05T08:44:41-0600', 324.0855781475384, 310.5003188776176, 1.1316873296545302, 0.0);
addDataPoint('2025-11-05T08:47:26-0600', 308.8639331238174, 288.4945127400636, 1.0182801956495666, 0.0);
addDataPoint('2025-11-05T08:50:11-0600', 306.78433905570165, 291.4512919162927, 1.1096730621014208, 0.0);
addDataPoint('2025-11-05T08:52:56-0600', 348.75301472536086, 285.7357435589141, 1.8533036315301996, 0.0);
addDataPoint('2025-11-05T08:55:41-0600', 340.63971440810036, 300.18719309466616, 1.4533413534697313, 0.0);
addDataPoint('2025-11-05T08:58:26-0600', 338.57161350705275, 254.2582626203911, 1.9412438836978296, 0.0);
addDataPoint('2025-11-05T09:01:11-0600', 300.4494725649775, 317.9417648120574, 1.427268373823281, 0.0);
addDataPoint('2025-11-05T09:03:56-0600', 319.97422784029715, 296.14405347245804, 1.2255953476108827, 0.0);
addDataPoint('2025-11-05T09:06:41-0600', 303.4272266548071, 274.6166904703888, 1.6404488097688015, 0.0);
addDataPoint('2025-11-05T09:09:26-0600', 317.46491709137854, 311.5113592544288, 1.0765735700064303, 0.0);
addDataPoint('2025-11-05T09:12:11-0600', 318.2688733632303, 308.07609339229816, 1.7946565846646727, 0.0);
addDataPoint('2025-11-05T09:14:56-0600', 318.534605938201, 263.96398740379993, 1.070756340751804, 0.0);
addDataPoint('2025-11-05T09:17:41-0600', 308.9877117502091, 317.07875718851903, 1.738530429391662, 0.0);
addDataPoint('2025-11-05T09:20:26-0600', 325.3834647279746, 324.83453488064697, 1.0940280719311328, 0.0);
addDataPoint('2025-11-05T09:23:11-0600', 340.2760459020862, 263.16051138318124, 1.9250411593363734, 0.0);
addDataPoint('2025-11-05T09:25:56-0600', 311.2361902647629, 281.53408336747015, 1.9904836883808088, 0.0);
addDataPoint('2025-11-05T09:28:41-0600', 333.6510903126607, 296.77934084462515, 1.6199961907600688, 0.0);
addDataPoint('2025-11-05T09:31:26-0600', 326.7579914855033, 255.32083194598977, 1.2299481533050463, 0.0);
addDataPoint('2025-11-05T09:34:11-0600', 326.1429903681338, 283.0356670027071, 1.4592381447529854, 0.5831639828215303);

renderCharts();
</script>
</body>
</html>